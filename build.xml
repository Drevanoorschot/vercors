<!-- -*- tab-width:2 ; indent-tabs-mode:nil -*- -->
<!-- this file is used for command line building,
     somehow eclipse is unable to parse this file,
     so we use jar-build.xml to include thte shared
     jar building target.
  -->

<project name="VerCors Tool" default="jar">

  <property name="src"          value="${basedir}/src"/>
  <property name="doc"          value="${basedir}/doc"/>
  <property name="bin"          value="${basedir}/bin"/>
  <property name="libs"         value="${basedir}/libs"/>
  <property name="dist"         value="${basedir}/dist"/>
  <property environment="env"/>

  <target name="clean">
    <delete dir="${bin}"/>
    <delete file="vct-core.jar"/>
  </target>

  <target name="compile">
    <mkdir dir="${bin}"/>
    <javac srcdir="${src}"
           destdir="${bin}"
           classpath="${bin}:${basedir}/../hre/hre.jar"
           debug="on"
           includeAntRuntime="false"
           source="1.6"
           target="1.6">
      <include name="**/*.java"/>
    </javac>
  </target>
	
  <target name="jar-build" description="Generate the jar file">
    <!-- This target has no dependencies to allow calling from eclipse. -->
		<jar destfile="vct-core.jar" >
      <manifest>
        <attribute name="Built-By" value="${user.name}"/>
      </manifest>
		  <fileset dir="bin">
		  	<include name="**" />
		  </fileset>
		</jar>
	</target>

	<target name="jar" description="Compile and Generate the jar file" depends="compile">
	  <!-- do not inline! -->
		<antcall target="jar-build"/>
	</target>

</project>


