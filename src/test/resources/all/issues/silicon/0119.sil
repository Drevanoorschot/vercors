field x: Int

predicate p(this: Ref) { acc(this.x, 1/2) }

method m(this: Ref)
  requires acc(p(this)) && acc(this.x, 1/2)
{
  var c: Int
  var d: Int

  c := unfolding acc(p(this)) in this.x
  exhale acc(this.x, 1/2)
  d := unfolding acc(p(this)) in this.x

  assert c == d
}
