field f: Int

method t11(r: Ref) returns ()
  requires r != null && true
{
    var j: Int := 2

    //:: ExpectedOutput(while.failed:insufficient.permission)
    while (j < 3)
        invariant r != null
        //:: ExpectedOutput(invariant.not.established:assertion.false)
        //:: MissingOutput(invariant.not.established:assertion.false, /Silicon/issue/34/)
        invariant r.f == 2
    {
        j := j+1
    }
}

method t1(r: Ref)
  requires acc(r.f)
{
  while (true)
    invariant true
    //:: ExpectedOutput(invariant.not.preserved:insufficient.permission)
    invariant acc(r.f)
  {
    exhale acc(r.f)
  }
}

method t2(r: Ref)
  requires r != null
{
  while (true)
    invariant true
    //:: ExpectedOutput(invariant.not.established:insufficient.permission)
    invariant acc(r.f)
  {}
}
