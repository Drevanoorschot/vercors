
var f: Int

method t1(this: Ref)
{
    var rd: Perm
    var n: Int
    inhale acc(this.f, wildcard)
    inhale (n > 0)
    fresh(rd) {
        exhale acc(this.f, 2*rd)
    }
    //:: ExpectedError(assert.failed:assertion.false)
    assert false
}

method t2(this: Ref)
{
    var rd: Perm
    var n: Int
    inhale acc(this.f, wildcard)
    inhale (n > 0)
    fresh(rd) {
        exhale acc(this.f, n*rd)
    }
    //:: ExpectedError(assert.failed:assertion.false)
    assert false
}

method t3(this: Ref)
{
    var rd: Perm
    var n: Int
    inhale acc(this.f, wildcard)
    inhale (n > 0)
    fresh(rd) {
        exhale acc(this.f, n*rd + 3*rd)
    }
    //:: ExpectedError(assert.failed:assertion.false)
    assert false
}

method t3b(this: Ref)
{
    var rd: Perm
    var n: Int
    inhale acc(this.f, wildcard)
    inhale (n > 0)
    fresh(rd) {
        exhale acc(this.f, n*rd) && acc(this.f, 3*rd)
    }
    //:: ExpectedError(assert.failed:assertion.false)
    assert false
}

method t3c(this: Ref)
{
    var rd: Perm
    var n: Int
    inhale acc(this.f, wildcard)
    inhale (n > 0)
    fresh(rd) {
        exhale acc(this.f, 3*rd) && acc(this.f, n*rd)
    }
    //:: ExpectedError(assert.failed:assertion.false)
    assert false
}

method t4(this: Ref)
{
    var rd: Perm
    var n: Int
    inhale acc(this.f, wildcard)
    inhale (n > 0)
    fresh(rd) {
        exhale acc(this.f, rd+rd)
    }
    //:: ExpectedError(assert.failed:assertion.false)
    assert false
}

method t4b(this: Ref)
{
    var rd: Perm
    var n: Int
    inhale acc(this.f, wildcard)
    inhale (n > 0)
    fresh(rd) {
        exhale acc(this.f, rd) && acc(this.f, rd)
    }
    //:: ExpectedError(assert.failed:assertion.false)
    assert false
}

method t5(this: Ref)
{
    var rd: Perm
    var n: Int
    inhale acc(this.f, wildcard)
    inhale (n > 0)
    fresh(rd) {
        exhale acc(this.f, n*(rd + rd))
    }
    //:: ExpectedError(assert.failed:assertion.false)
    assert false
}

method t6(this: Ref)
{
    var rd: Perm
    var n: Int
    inhale acc(this.f, wildcard) && acc(this.f, 1/4);
    inhale (n > 0)
    fresh(rd) {
        exhale acc(this.f, (1/4) * rd)
    }
    //:: ExpectedError(assert.failed:assertion.false)
    assert false
}

method t7(this: Ref)
{
    var rd: Perm
    var n: Int
    inhale acc(this.f, wildcard) && acc(this.f, 1/4);
    inhale (n > 0)
    fresh(rd) {
        //:: UnexpectedError(exhale.failed:insufficient.permission, /silicon/issue/35/)
        exhale acc(this.f, (1/2) * (n * rd + 1/2))
    }
    //:: ExpectedError(assert.failed:assertion.false)
    //:: MissingError(assert.failed:assertion.false, /silicon/issue/35/)
    assert false
}

method t8(this: Ref)
{
    var rd: Perm
    var n: Int
    inhale acc(this.f, wildcard) && acc(this.f, 1/4);
    inhale (n > 0)
    fresh(rd) {
        //:: UnexpectedError(exhale.failed:insufficient.permission, /silicon/issue/35/)
        exhale acc(this.f, (1/2) - (1/4) + n*rd)
    }
    //:: ExpectedError(assert.failed:assertion.false)
    //:: MissingError(assert.failed:assertion.false, /silicon/issue/35/)
    assert false
}

method t9(this: Ref)
{
    var rd: Perm
    var n: Int
    inhale acc(this.f, wildcard) && acc(this.f, 1/4);
    inhale (n > 0)
    fresh(rd) {
        //:: UnexpectedError(exhale.failed:insufficient.permission, /silicon/issue/35/)
        exhale acc(this.f, (1/4) - ((-100)*rd))
    }
    //:: ExpectedError(assert.failed:assertion.false)
    //:: MissingError(assert.failed:assertion.false, /silicon/issue/35/)
    assert false
}
